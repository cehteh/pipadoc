<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.2.7" />
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble,
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-right: 10%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock {
  margin-right: 0%;
}
div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock {
  padding-left: 2.0em;
}
div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock {
  padding-left: 2.0em;
}
div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
div.olist > ol {
  list-style-type: decimal;
}
div.olist2 > ol {
  list-style-type: lower-alpha;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}

div.hlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hlist td {
  padding-bottom: 15px;
}
td.hlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
}
td.hlist2 {
  vertical-align: top;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock-content {
  white-space: pre;
}
div.verseblock-attribution {
  padding-top: 0.75em;
  text-align: left;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }

/* Because IE6 child selector is broken. */
div.olist2 ol {
  list-style-type: lower-alpha;
}
div.olist2 div.olist ol {
  list-style-type: decimal;
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){generateToc(2)}
/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, October 2006. License: GPL */

function getText(el) {
  var text = "";
  for (var i = el.firstChild; i != null; i = i.nextSibling) {
    if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
      text += i.data;
    else if (i.firstChild != null)
      text += getText(i);
  }
  return text;
}

function TocEntry(el, text, toclevel) {
  this.element = el;
  this.text = text;
  this.toclevel = toclevel;
}

function tocEntries(el, toclevels) {
  var result = new Array;
  var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
  // Function that scans the DOM tree for header elements (the DOM2
  // nodeIterator API would be a better technique but not supported by all
  // browsers).
  var iterate = function (el) {
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
        var mo = re.exec(i.tagName)
        if (mo)
          result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
        iterate(i);
      }
    }
  }
  iterate(el);
  return result;
}

// This function does the work. toclevels = 1..4.
function generateToc(toclevels) {
  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementsByTagName("body")[0], toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "toc" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    document.getElementById("header").removeChild(toc);
}
/*]]>*/
</script>
<title>pipadoc - Documentation extractor</title>
</head>
<body>
<div id="header">
<h1>pipadoc - Documentation extractor</h1>
<span id="author">Christian Thaeter</span><br />
<span id="email"><tt>&lt;<a href="mailto:ct@pipapo.org">ct@pipapo.org</a>&gt;</tt></span><br />
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="para"><p>Embedding documentation in program source files often yields the problem that the
structure of a program is most often not the optimal structure for the associated documentation.
Still there are good reasons to maintain documentation together with the source right at the code
which defines the documented functionality. Pipadoc addresses this problem by extracting
special comments out of a source file and let one define rules how to bring the
documentation into proper order.</p></div>
<div class="para"><p>Pipadoc only extracts and reorders the text from it special comments, it never ever looks at the
sourcecode or the text it extracts.</p></div>
<div class="para"><p>This is somewhat similar to &#8220;Literate Programming&#8221; but it puts the emphasis back to the code.
There is no need to extract the source from a literate source and in contrast to &#8220;Literate Programming&#8221;
the order of source and text is defined by the programmer and programming language constraints.</p></div>
<div class="para"><p>Pipadoc is programming language and documentation system agnostic, all it requires is that
the programming language has some line comments or block comments where one places doc statements
on each block line (see <a href="#c-example">Example for C</a>).</p></div>
</div>
</div>
<h2 id="BAS">Basic concepts</h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The following description uses the <a href="#ENV">default</a> settings for all examples.</td>
</tr></table>
</div>
<div class="para"><p>Pipadoc is controlled by special line comments.</p></div>
<div class="para" id="DIR"><div class="title">Direct comments</div><p>Line comments immediately followed by a special documentation character (the underscore <tt>_</tt> by default)
are treated as direct comments. They will appear in order of appearance in the generated output.
These can be used to do some boilerplate stuff. Usually one wants to define a controlling document and
use this direct comments only there, since using them in different files might yield unexpected results
since the order then depends on the load order of the files.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>//_ This is a direct comment,
//_ it will appear just verbatim in the generated output</tt></pre>
</div></div>
<div class="para" id="KEY"><div class="title">Keys</div><p>A line comment immediately followed by a alphanumeric keyword (including the <tt>_</tt> underscore character)
is treated as key, all such keyed comments can later be placed in intended order with
a <a href="#SUB">substitution</a> comment.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>//example This text will later be inserted where one uses the `//=example` substitution.
//example All example lines are appended there in order even if they are defined at different
//example places or in different files</tt></pre>
</div></div>
<div class="para" id="SOR"><div class="title">Sorted Keys</div><p>A key can be appended with a dot <tt>.</tt> and a non-space string. This string will then be used to sort
these lines alphabetically. This can be used to create sorted indices and glossars, as well as reordering
paragraphs in stored under one primary key.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>//example.omega This is sorted after the next line
//example.alpha comes before the omega line above</tt></pre>
</div></div>
<div class="para" id="SUB"><div class="title">Substitutions</div><p>A line comment immediately followed by a special <tt>substitution</tt> character (the equal <tt>=</tt> sign by default)
followed by a <a href="#KEY">key</a> will be replaced by the text defined under that key. The rest of the line
is ignored and can be used as comment.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>//=example this will insert anything defined under `//example` here</tt></pre>
</div></div>
</div>
<h2 id="INV">Invocation</h2>
<div class="sectionbody">
<div class="para"><p>Pipadoc is called with a list of files from which the documentation shall be extracted.
The extracted documentation is piped to stdout. No other command line options are available.</p></div>
<div class="para"><p>There are few <a href="#ENV">environment variables</a> to do basic configuration.</p></div>
</div>
<h2 id="USE">Documenting Files</h2>
<div class="sectionbody">
<div class="para"><p>Usually one wants to write documentation in more or less smaller blocks which later shall be
brought into proper order. The <a href="#SUB">substitutions</a> feature is the key for this. One writes
his documentation blocks with comments which later get replaced by the right sorting key and
finally brought into (alphabetical) stable-sort order. You might take a look at the pipadoc
source itself to see it in action.</p></div>
<div class="listingblock">
<div class="title">Example: A small C99 Program</div>
<div class="content"><!-- Generator: GNU source-highlight 2.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">//intro This is the well known ``Hello World'' example</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//glos.helloworld A common program to show examples for programming language and tools</span></span>

<span style="font-style: italic"><span style="color: #9A1900">//depends Only the Standard C library is needed</span></span>

<span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> argc<span style="color: #990000">,</span> <span style="color: #009900">char</span><span style="color: #990000">*</span> argv<span style="color: #990000">[])</span>
<span style="color: #FF0000">{</span>
  <span style="font-style: italic"><span style="color: #9A1900">//hello print the first commandline argument</span></span>
  <span style="font-style: italic"><span style="color: #9A1900">//glos.argument the text you pass to the programm when calling it from the shell</span></span>
  <span style="font-style: italic"><span style="color: #9A1900">//hello if no argument is given, then exit silently</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>argc <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">)</span>
    <span style="font-weight: bold"><span style="color: #000000">printf</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hello %s</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">,</span> argv<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]);</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Now the document structure with substitutions:</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//_ Yet another 'Hello' program</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//_</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//=intro introduction first right after the title</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//intro</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//=hello The main documentation</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//_</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//_ Appendix</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//_ Dependencies:</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//=depends</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//_ Glossary</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//=glos glossary will be sorted</span></span>
</tt></pre></div></div>
<div class="para"><p>Runnning this through pipadoc gives following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Yet another 'Hello' program

This is the well known ``Hello World'' example

print the first commandline argument
if no argument is given, then exit silently

Appendix
Dependencies:
Only the Standard C library is needed
Glossary
the text you pass to the programm when calling it from the shell
A common program to show examples for programming language and tools</tt></pre>
</div></div>
</div>
<h2 id="SXT">Documentation Only Files</h2>
<div class="sectionbody">
<div class="para"><p>One can write documentation without the need of pipadoc special comments in files
which have a configured extension (see the <a href="#ENVSXT">SXT</a> environment variable).
Each line in such a file which does not have a pipadoc special comment is then implicitly
prepended with the line comment sequence and the basename of that file, for example
lines in a file <em>foo.txt</em> will be treated as if they where written with <tt>//foo </tt> in front of
them. Later <a href="#SUB">substitutions</a> can be used to organize the document.
When such a file has an ordinary pipadoc special comment line then this takes precedence over
the implicit commenting.</p></div>
</div>
<h2 id="PLU">Plugins</h2>
<div class="sectionbody">
<div class="para"><p>Pipadoc can be extended with awk. Please refer to the provided <em>asciidoc.pawk</em> for an example.</p></div>
</div>
<h2 id="_appendix">Appendix</h2>
<div class="sectionbody">
<h3 id="ENV">Environment Variables</h3><div style="clear:left"></div>
<div class="vlist"><dl>
<dt>
<tt>COM</tt>
</dt>
<dd>
<p>
  Defines the line-comment character used in the source file.
  Defaults to <tt>//</tt> (C++/C99) if not set. Set this to <tt>#</tt> for shell
  like languages.
</p>
</dd>
<dt>
<tt>DOC</tt>
</dt>
<dd>
<p>
  The Documentation character which must follow a line comment to be recognized
  by pipadoc as documentation. Either one for local definitions or two for global
  definitions are used. Defaults to <tt>_</tt> and needs rarely to be changed.
</p>
</dd>
<dt>
<tt>SUB</tt>
</dt>
<dd>
<p>
  Substitution character. Defaults to <tt>=</tt> and rarely needs to be changed.
  See <a href="#SUB">substitutions</a> for details.
</p>
</dd>
</dl></div>
<div class="vlist" id="ENVSXT"><dl>
<dt>
<tt>SXT</tt>
</dt>
<dd>
<p>
  Section eXTention. Defaults to <tt>.txt</tt>.
  See <a href="#SXT">plaintext files</a> for details.
</p>
</dd>
<dt>
<tt>PLG</tt>
</dt>
<dd>
<p>
  Extension for <a href="#PLU">awk plugins</a> to implement generic text manipulations and macros.
  Defaults to <em>.pawk</em>
</p>
</dd>
</dl></div>
<div class="listingblock" id="c-example">
<div class="title">Example: Using C block comments with pipadoc: <tt>example.c</tt></div>
<div class="content">
<pre><tt>/*
//_ this is a documentation line
*/</tt></pre>
</div></div>
<div class="para"><p>use <tt>pipadoc example.c</tt> to process the documentation.</p></div>
<h3 id="_creating_this_file">Creating this File</h3><div style="clear:left"></div>
<div class="para"><p>Pipadoc itself is documented with asciidoc, one can extract the asciidoc source with
by:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>COM='#' ./pipadoc pipadoc asciidoc.pawk &gt;pipadoc.txt</tt></pre>
</div></div>
<div class="para"><p>And then further process the generated asciidoc.txt with the asciidoc toolchain.</p></div>
<h3 id="_license">License</h3><div style="clear:left"></div>
<div class="literalblock" id="LIC">
<div class="content">
<pre><tt>Copyright (C)              Pipapo Project
 2009,                     Christian Thaeter &lt;ct@pipapo.org&gt;

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2, or (at your option)
any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, contact Christian Thaeter &lt;ct@pipapo.org&gt;.</tt></pre>
</div></div>
</div>
<h2 id="_index">Index</h2>
<div class="sectionbody">
<div class="hlist"><table>
<tr>
<td class="hlist1">
<a href="#DIR">Direct comments</a>
</td>
<td class="hlist2">
low level control
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#KEY">Keys</a>
</td>
<td class="hlist2">
sectioning content
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#SOR">Sorted Keys</a>
</td>
<td class="hlist2">
sorted sections
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#SUB">Substitutions</a>
</td>
<td class="hlist2">
paste sections
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#USE">Documenting Files</a>
</td>
<td class="hlist2">
usage
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#PLU">Plugins</a>
</td>
<td class="hlist2">
extending pipadoc
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#ENV">Environment Variables</a>
</td>
<td class="hlist2">
configuration
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#SXT">Documentation Only Files</a>
</td>
<td class="hlist2">
plain documentation
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#INV">Invocation</a>
</td>
<td class="hlist2">
running pipadoc
</td>
</tr>
<tr>
<td class="hlist1">
<a href="#BAS">Basic concepts</a>
</td>
<td class="hlist2">
concepts
</td>
</tr>
</table></div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2009-05-22 22:58:06 CEST
</div>
</div>
</body>
</html>
